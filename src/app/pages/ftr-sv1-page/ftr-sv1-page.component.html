<form [formGroup]="budgetForm" (submit)="onSave()">
  <div
    class="px-2 py-1 rounded-md lg:py-3 lg:px-6 bg-content shadow-card dark:bg-content-dark dark:shadow-none mt-5 mb-3"
  >
    <p class="text-2xl text-gray-500 mt-5 mb-3">งบประมาณประจำปี</p>
    <div
      class="text-[#566a7f] mt-5 mb-3 rounded-md shadow p-6 w-full bg-gray-100 dark:text-[#e4e6eb] dark:bg-[#242526]"
    >
      <div class="mb-5">
        <mat-radio-group
          formControlName="company"
          class="flex space-x-4"
          (change)="genDeptsByCompanyName()"
        >
          <mat-radio-button id="pcc" value="PCCTH" color="primary" checked
            >PCCTH</mat-radio-button
          >
          <mat-radio-button id="ws" value="WiseSoft" color="primary"
            >WiseSoft</mat-radio-button
          >
        </mat-radio-group>
      </div>
      <div class="grow flex">
        <mat-label class="self-center-cm" for="budgetYear"
          >ฝึกอบรมรายปี</mat-label
        >
        <mat-form-field appearance="outline" class="size-16 grow mx-3">
          <input
            matInput
            id="budgetYear"
            formControlName="budgetYear"
            type="text"
            placeholder="โปรดระบุปี พ.ศ. ที่ต้องการ"
          />
          <mat-error *ngIf="this.budgetForm.controls.budgetYear.invalid"
            >กรุณากรอกข้อมูล
          </mat-error>
        </mat-form-field>
        <mat-label class="self-center-cm" for="dept">ฝ่าย/แผนก</mat-label>
        <mat-form-field appearance="outline" class="grow mx-3">
          <mat-label>หัวข้อในการอบรม/สัมมนา</mat-label>
          <mat-select formControlName="dept" id="dept">
            <mat-option *ngFor="let dept of depts" [value]="dept">{{
              dept
            }}</mat-option>
          </mat-select>
          <mat-error *ngIf="this.budgetForm.controls.dept.invalid"
            >กรุณาเลือกผ่ายที่ต้องการ
          </mat-error>
        </mat-form-field>
      </div>
    </div>
    <div
      class="text-[#566a7f] mt-2 mb-3 rounded-md shadow p-6 w-full bg-gray-100 dark:text-[#e4e6eb] dark:bg-[#242526]"
    >
      <div class="flex gap-2">
        <mat-label class="self-center w-2/12" for=" udgetTrain"
          >งบประมาณการอบรม</mat-label
        >
        <mat-form-field appearance="outline" class="">
          <input
            matInput
            id=" budgetTrain"
            formControlName="budgetTrain"
            type="text"
            (keypress)="onInputKeyPressFee($event)"
            (blur)="onBlurFee($event, 0)"
            class="w-2/12"
            placeholder="0.00"
          /><span matPrefix class="pr-2">฿ </span>
          <span matSuffix>บาท</span>
          <mat-error *ngIf="this.budgetForm.controls.dept.invalid"
            >กรุณากรอกข้อมูล
          </mat-error>
        </mat-form-field>
        <mat-label class="self-center w-2/12" for="budgetCer"
          >งบประมาณการสอบ</mat-label
        >
        <mat-form-field appearance="outline" class="mx-3">
          <input
            matInput
            id="budgetCer"
            formControlName="budgetCer"
            type="text"
            (keypress)="onInputKeyPressAccommodation($event)"
            (blur)="onBlurFee($event, 1)"
            class="w-2/12"
            placeholder="0.00"
          /><span matPrefix class="pr-2">฿ </span>
          <span matSuffix>บาท</span>
          <mat-error *ngIf="this.budgetForm.controls.dept.invalid"
            >กรุณากรอกข้อมูล
          </mat-error>
        </mat-form-field>
        <mat-label class="self-center-cm w-2/12" for="budgetTotal"
          >งบประมาณรวม</mat-label
        >
        <mat-form-field appearance="outline" class="grow mx-3">
          <input
            matInput
            readonly
            id="budgetTotal"
            formControlName="budgetTotal"
            type="text"
            (focus)="onTotalBudget()"
            class="w-2/12"
            placeholder="0.00"
          />
          <span matPrefix class="pr-2">฿ </span>
          <span matSuffix>บาท</span>
          <mat-error *ngIf="this.budgetForm.controls.dept.invalid"
            >กรุณากรอกข้อมูล
          </mat-error>
        </mat-form-field>
      </div>
    </div>
    <div class="flex justify-center gap-x-1">
      <button
        mat-raised-button
        type="submit"
        [disabled]="budgetForm.invalid"
        color="primary"
        class="flex items-center text-center {{
          budgetForm.invalid
            ? 'cursor-not-allowed bg-gray-400 border-2 border-gray-400'
            : 'cursor-pointer bg-[#696cf8] hover:bg-[#696cf8] !text-white hover:!text-white border-2 border-[#696cf8]'
        }}"
      >
        <i
          class="fa-solid fa-plus mr-1 {{
            budgetForm.invalid ? '' : 'text-white'
          }}"
        ></i
        ><span class="{{ budgetForm.invalid ? '' : 'text-white' }}"
          >เพื่มข้อมูล</span
        >
      </button>
      <button
        mat-stroked-button
        color="primary"
        (click)="clearForm()"
        class="clear-button"
      >
        <i class="fas fa-sync-alt mr-1"></i>
        <span> เคลียร์ข้อมูล</span>
      </button>
    </div>
  </div>
</form>
